#!/usr/bin/python

L1Paths25ns = [
                                'L1_AlwaysTrue ',
                          'L1_DoubleEG6_HTT150 ',
                            'L1_DoubleEG_15_10 ',
                    'L1_DoubleEG_20_10_1LegIso ',
                            'L1_DoubleEG_22_10 ',
                          'L1_DoubleIsoTau36er ',
                          'L1_DoubleIsoTau40er ',
                          'L1_DoubleIsoTau44er ',
                                 'L1_DoubleMu0 ',
                  'L1_DoubleMu0_Eta1p6_WdEta18 ',
               'L1_DoubleMu0_Eta1p6_WdEta18_OS ',
                             'L1_DoubleMu6_EG6 ',
                             'L1_DoubleMu7_EG7 ',
                     'L1_DoubleMu_10_0_WdEta18 ',
                           'L1_DoubleMu_10_3p5 ',
                          'L1_DoubleMu_10_Open ',
                             'L1_DoubleMu_12_5 ',
                           'L1_DoubleS1JetC100 ',
                           'L1_DoubleS1JetC112 ',
                           'L1_DoubleS1JetC120 ',
              'L1_DoubleS1JetC32_WdPhi7_HTT125 ',
                            'L1_DoubleS1JetC52 ',
                      'L1_DoubleS1JetC56_ETM60 ',
                      'L1_DoubleS1JetC60_ETM60 ',
                            'L1_DoubleS1JetC84 ',
                          'L1_DoubleTauJet40er ',
                             'L1_EG25er_HTT125 ',
                                    'L1_ETM100 ',
                                     'L1_ETM30 ',
                                     'L1_ETM40 ',
                                     'L1_ETM50 ',
                                     'L1_ETM60 ',
                    'L1_ETM60_NotS1Jet52WdPhi2 ',
                                     'L1_ETM70 ',
                    'L1_ETM70_NotS1Jet52WdPhi2 ',
             'L1_HTT110_rHTM0p6_rHTM0p0_WdPhi6 ',
                                    'L1_HTT125 ',
                            'L1_HTT125_rHTM0p3 ',
                                    'L1_HTT150 ',
                                    'L1_HTT175 ',
                                    'L1_HTT200 ',
                                    'L1_HTT250 ',
            'L1_IsoEG20er_TauJet20er_NotWdEta0 ',
                               'L1_Mu0er_ETM55 ',
                              'L1_Mu10er_ETM50 ',
                                 'L1_Mu12_EG10 ',
                              'L1_Mu14er_ETM30 ',
                         'L1_Mu16er_IsoTau36er ',
                         'L1_Mu16er_TauJet20er ',
                                 'L1_Mu20_EG10 ',
                                  'L1_Mu20_EG8 ',
                    'L1_Mu3_S1JetC16_WdEtaPhi2 ',
                    'L1_Mu3_S1JetC52_WdEtaPhi2 ',
                    'L1_Mu3_S1JetC92_WdEtaPhi2 ',
                                  'L1_Mu4_EG18 ',
                             'L1_Mu5_DoubleEG5 ',
                                  'L1_Mu5_EG15 ',
                                  'L1_Mu5_EG20 ',
                               'L1_Mu5_IsoEG18 ',
                            'L1_Mu6_DoubleEG10 ',
                                'L1_Mu6_HTT150 ',
                                'L1_Mu8_HTT125 ',
                                   'L1_QuadMu0 ',
                     'L1_QuadS1JetC36_TauJet52 ',
                              'L1_QuadS1JetC40 ',
                              'L1_QuadS1JetC60 ',
                              'L1_QuadS1JetC84 ',
'L1_S1Jet32_DoubleMu_Open_10_MuMuNotWdPhi23_JetMuWdPhi1 ',
'L1_S1Jet32_MuOpen_EG10_MuEGNotWdPhi3_JetMuWdPhi1 ',
                                'L1_SingleEG10 ',
                                'L1_SingleEG20 ',
                                'L1_SingleEG25 ',
                                'L1_SingleEG30 ',
                                'L1_SingleEG35 ',
                                'L1_SingleEG40 ',
                                 'L1_SingleEG5 ',
                             'L1_SingleIsoEG18 ',
                           'L1_SingleIsoEG20er ',
                           'L1_SingleIsoEG22er ',
                             'L1_SingleIsoEG25 ',
                           'L1_SingleIsoEG25er ',
                           'L1_SingleIsoEG28er ',
                           'L1_SingleIsoEG30er ',
                                'L1_SingleMu12 ',
                         'L1_SingleMu14_Eta2p1 ',
                                'L1_SingleMu16 ',
                         'L1_SingleMu16_Eta2p1 ',
                              'L1_SingleMu18er ',
                                'L1_SingleMu20 ',
                              'L1_SingleMu20er ',
                                'L1_SingleMu25 ',
                              'L1_SingleMu25er ',
                                'L1_SingleMu30 ',
                              'L1_SingleMu30er ',
                                 'L1_SingleMu5 ',
                       'L1_SingleMu6_NotBptxOR ',
                          'L1_SingleMuBeamHalo ',
                              'L1_SingleMuOpen ',
                            'L1_SingleS1Jet128 ',
                            'L1_SingleS1Jet176 ',
                            'L1_SingleS1Jet200 ',
                            'L1_SingleS1Jet240 ',
                             'L1_SingleS1Jet36 ',
                             'L1_SingleS1Jet52 ',
                             'L1_SingleS1Jet68 ',
                             'L1_SingleS1Jet92 ',
                  'L1_SingleS1JetC20_NotBptxOR ',
                  'L1_SingleS1JetC32_NotBptxOR ',
                          'L1_TripleEG_14_10_8 ',
                                 'L1_TripleMu0 ',
                            'L1_TripleMu_5_5_3 ',
                  'L1_TripleS1Jet_92_76_64_VBF ',
                                  'L1_ZeroBias ',
]

L1Paths50ns = [
    'L1_SingleMuOpen ',
    'L1_SingleMu5 ',
    'L1_SingleMu12 ',
    'L1_SingleMu16 ',
    'L1_SingleMu20 ',
    'L1_SingleMu25 ',
    'L1_SingleMu30 ',
    'L1_SingleMu14_Eta2p1 ',
    'L1_SingleMu16_Eta2p1 ',
    'L1_SingleMu18er ',
    'L1_SingleMu20er ',
    'L1_SingleMu25er ',
    'L1_SingleMu30er ',
    'L1_DoubleMu0_Eta1p6_WdEta18_OS ',
    'L1_DoubleMu0_Eta1p6_WdEta18 ',
    'L1_DoubleMu_10_0_WdEta18 ',
    'L1_DoubleMu0 ',
    'L1_DoubleMu_10_Open ',
    'L1_DoubleMu_10_3p5 ',
    'L1_DoubleMu_12_5 ',
    'L1_TripleMu0 ',
    'L1_TripleMu_5_5_3 ',
    'L1_QuadMu0 ',
    'L1_SingleEG5 ',
    'L1_SingleEG10 ',
    'L1_SingleEG15 ',
    'L1_SingleEG20 ',
    'L1_SingleEG25 ',
    'L1_SingleEG30 ',
    'L1_SingleEG35 ',
    'L1_SingleEG35er ',
    'L1_SingleEG40 ',
    'L1_SingleIsoEG18 ',
    'L1_SingleIsoEG25 ',
    'L1_SingleIsoEG20er ',
    'L1_SingleIsoEG22er ',
    'L1_SingleIsoEG25er ',
    'L1_SingleIsoEG28er ',
    'L1_SingleIsoEG30er ',
    'L1_DoubleEG_15_10 ',
    'L1_DoubleEG_22_10 ',
    'L1_DoubleEG_20_10_1LegIso ',
    'L1_TripleEG_14_10_8 ',
    'L1_SingleJet36 ',
    'L1_SingleJet52 ',
    'L1_SingleJet68 ',
    'L1_SingleJet92 ',
    'L1_SingleJet128 ',
    'L1_SingleJet176 ',
    'L1_SingleJet200 ',
    'L1_SingleJet240 ',
    'L1_DoubleJetC52 ',
    'L1_DoubleJetC72 ',
    'L1_DoubleJetC84 ',
    'L1_DoubleJetC100 ',
    'L1_DoubleJetC112 ',
    'L1_DoubleJetC120 ',
    'L1_DoubleTauJet36er ',
    'L1_DoubleTauJet40er ',
    'L1_DoubleTauJet44er ',
    'L1_TripleJet_92_76_64 ',
    'L1_QuadJetC40 ',
    'L1_QuadJetC60 ',
    'L1_QuadJetC84 ',
    'L1_ETM30 ',
    'L1_ETM40 ',
    'L1_ETM50 ',
    'L1_ETM60 ',
    'L1_ETM70 ',
    'L1_ETM100 ',
    'L1_ETM60_NotJet52WdPhi2 ',
    'L1_ETM70_NotJet52WdPhi2 ',
    'L1_HTT125 ',
    'L1_HTT150 ',
    'L1_HTT175 ',
    'L1_HTT200 ',
    'L1_HTT250 ',
    'L1_Mu6_HTT150 ',
    'L1_Mu8_HTT125 ',
    'L1_Mu0er_ETM55 ',
    'L1_Mu14er_ETM30 ',
    'L1_Mu10er_ETM50 ',
    'L1_EG25er_HTT125 ',
    'L1_Mu16er_TauJet20er ',
    'L1_IsoEG20er_TauJet20er_NotWdEta0 ',
    'L1_Mu12_EG10 ',
    'L1_Mu20_EG8 ',
    'L1_Mu20_EG10 ',
    'L1_Mu4_EG18 ',
    'L1_Mu5_EG15 ',
    'L1_Mu5_EG20 ',
    'L1_Mu5_IsoEG18 ',
    'L1_DoubleMu6_EG6 ',
    'L1_DoubleMu7_EG7 ',
    'L1_Mu5_DoubleEG5 ',
    'L1_Mu6_DoubleEG10 ',
    'L1_DoubleEG6_HTT150 ',
    'L1_Jet32_DoubleMu_Open_10_MuMuNotWdPhi23_JetMuWdPhi1 ',
    'L1_Jet32_MuOpen_EG10_MuEGNotWdPhi3_JetMuWdPhi1 ',
    'L1_Mu3_JetC16_WdEtaPhi2 ',
    'L1_Mu3_JetC52_WdEtaPhi2 ',
    'L1_DoubleJetC32_WdPhi7_HTT125 ',
    'L1_DoubleJetC56_ETM60 ',
    'L1_DoubleJetC60_ETM60 ',
    'L1_QuadJetC36_TauJet52 ',
    'L1_ZeroBias ',
    'L1_AlwaysTrue ',
    'L1_SingleMuBeamHalo ',
    'L1_SingleMuOpen_NotBptxOR ',
    'L1_SingleJetC32_NotBptxOR ',
    'L1_SingleJetC20_NotBptxOR ',
    ]


import os,math

for trigger in L1Paths50ns:
#    if(trigger=='L1_S1Jet32_DoubleMu_Open_10_MuMuNotWdPhi23_JetMuWdPhi1 '):
    path = trigger[:-1]
    filename = path+'.txt'
    os.system('cat Neutrino_Pt-2to20_gun_Phys14DR-AVE30BX50_tsg_PHYS14_ST_V1-v2/res/CMSSW_*.stdout | grep \"%s\" >> %s'% (trigger, filename))

outfile = open('L1_Rates_2015Collisions_50nsL1Menu_5e33.csv','w')

#outfile.write("Sample/C:Path/C:Rate/F:Error/F\n")

for trigger in L1Paths50ns:
    path = trigger[:-1]
    filename = path+'.txt'
    f = open(filename,'r')
    total=0
    index = 0
    for line in f:
        index+=1
#        print line[70:82]
#        total += int( line[71:75]) 
#        print path,index
        if(path=='L1_Jet32_DoubleMu_Open_10_MuMuNotWdPhi23_JetMuWdPhi1'):
            total+=int( line[78:80])
        elif(path=='L1_S1Jet32_MuOpen_EG10_MuEGNotWdPhi3_JetMuWdPhi1'):
            total+=int(line[74:76])
        else:
#            print line
            total += int( line[71:75]) 
#        print 'length of line is: %i and length of path is %i ' % (len(line),len(path))
#            print 'current pass: %s and total pass: %i' % (line[71:75],total)
#            print 'length of numbers only is %i' % length

    ##normalize output to rate assume 1254 bx for 50ns and 11246 zero bias events per bx gives 14102484 events per second, then 9997019/14102484 is 0.7088 so each event counts as 1/0.7088 Hz
    rate = total/(0.7088)
    rate=rate/1000.0
    err = math.sqrt(total)/(1000.0*0.7088)
    outstring = '%s,%f,%f\n'%(path,rate,err)
    outfile.write(outstring)
    f.close()

outfile.close()


