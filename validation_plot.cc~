#include <iostream>
#include "TTree.h"
#include "TFile.h"
#include "TH1.h"
#include "TLegend.h"

void validation_plot(){
  
  gStyle->SetOptStat(kFALSE);

  //TFile* f_w = new TFile("DQM_Timing_CMSSW740_GRunV33_PU40bx25_wL1TRawToDigi_extRange.root");
  //TFile* f_no = new TFile("DQM_Timing_CMSSW740_GRunV33_PU40bx25_NoL1TRawToDigi_extRange.root");
  //TFile* f_73 = new TFile("../L1Skim/V2_Menu/DQM_Timing_PU40bx25_GRunV56_extRange.root");
  TFile* f_740p1 = new TFile("DQM_Timing_PU40bx25_CMSSW742_May2015FrozenMenu_rawCSC.root");
  TFile* f_742 = new TFile("DQM_Timing_PU40bx25_CMSSW742_May2015FrozenMenu_simCSC.root");

  //TH1F* h_w = (TH1F*)f_w->Get("DQMData/Run 1/HLT/Run summary/TimerService/Running 1 processes/process HLTX/all_paths");
  //TH1F* h_no = (TH1F*)f_no->Get("DQMData/Run 1/HLT/Run summary/TimerService/Running 1 processes/process HLTX/all_paths");
  //TH1F* h_73 = (TH1F*)f_73->Get("DQMData/Run 1/HLT/Run summary/TimerService/Running 1 processes/process HLTX/all_paths");
  TH1F* h_740p1 = (TH1F*)f_740p1->Get("DQMData/Run 1/HLT/Run summary/TimerService/Running 1 processes/process HLTX/all_paths");
  TH1F* h_742 = (TH1F*)f_742->Get("DQMData/Run 1/HLT/Run summary/TimerService/Running 1 processes/process HLTX/all_paths");

  //string title_w = Form("CMSSW_7_4_0 GRunV33 wL1RawToDigi Mean: %0.2f",h_w->GetMean());
  //string title_no = Form("CMSSW_7_4_0 GRunV33 noL1RawToDigi Mean: %0.2f",h_no->GetMean());
  //string title_73 = Form("CMSSW_7_3_2_patch2 GRunV56 wL1RawToDigi Mean: %0.2f",h_73->GetMean());
  string title_740p1 = Form("CMSSW_7_4_2 May frozen Menu raw CSC Mean: %0.2f",h_740p1->GetMean());
  string title_742 = Form("CMSSW_7_4_2 May frozen Menu sim CSC Mean: %0.2f",h_742->GetMean());
  TCanvas c1;

  h_740p1->SetTitle("");
  
  //h_w->Scale(1/h_w->Integral());
  //h_no->Scale(1/h_no->Integral());
  //h_73->Scale(1/h_73->Integral());
  h_740p1->Scale(1/h_740p1->Integral());
  h_742->Scale(1/h_742->Integral());
  
  //h_w->SetLineWidth(2);
  //h_w->SetLineColor(kRed);
  //h_no->SetLineWidth(2);
  //h_no->SetLineColor(kBlack);
  //h_73->SetLineWidth(2);
  //h_73->SetLineColor(kBlack);
  h_740p1->SetLineWidth(2);
  h_740p1->SetLineColor(kBlue);
  h_742->SetLineWidth(2);
  h_742->SetLineColor(kRed);

  //h_w->GetYaxis()->SetRangeUser(0,4000);
  //h_w->GetYaxis()->SetRangeUser(0,0.15);
  //h_w->GetXaxis()->SetRangeUser(0,400);

  h_740p1->GetXaxis()->SetRangeUser(0,400);
  h_740p1->GetYaxis()->SetRangeUser(0,0.15);

  //h_w->Draw();
  //h_no->Draw("same");
  //h_73->Draw();
  h_740p1->Draw("");
  h_742->Draw("same");

  TLegend* leg = new TLegend(0.35,0.6,0.9,0.9,"");
  leg->SetFillStyle(0);
  leg->SetBorderSize(0);
  //leg->AddEntry(h_w,title_w.c_str(),"l");
  //leg->AddEntry(h_no,title_no.c_str(),"l");
  //leg->AddEntry(h_73,title_73.c_str(),"l");
  leg->AddEntry(h_740p1,title_740p1.c_str(),"l");
  leg->AddEntry(h_742,title_742.c_str(),"l");
  leg->Draw("same");
  //c1.Print("HLT_74X_Validation.pdf");
  c1.Print("HLT_74X_Validation_CSC_comparison_norm.pdf");

  
}
